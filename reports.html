<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reports & Analytics</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container">
    <h1>Reports & Analytics</h1>

    <div class="cards">
        <div class="card">
            <h3>Total Patients</h3>
            <p id="totalPatients">0</p>
        </div>
        <div class="card">
            <h3>Total Doctors</h3>
            <p id="totalDoctors">0</p>
        </div>
        <div class="card">
            <h3>Total Appointments</h3>
            <p id="totalAppointments">0</p>
        </div>
        <div class="card">
            <h3>Total Revenue ($)</h3>
            <p id="totalRevenue">0</p>
        </div>
        <div class="card">
            <h3>Pending Bills</h3>
            <p id="pendingBills">0</p>
        </div>
    </div>

    <h2>Data Visualization</h2>
    <canvas id="overviewChart" width="600" height="300"></canvas>

    <a href="dashboard.html" class="back-link">‚Üê Back to Dashboard</a>
</div>

<script>
    async function loadReports() {
      const response = await fetch('reports');
      const data = await response.json();

      document.getElementById('totalPatients').innerText = data.patients;
      document.getElementById('totalDoctors').innerText = data.doctors;
      document.getElementById('totalAppointments').innerText = data.appointments;
      document.getElementById('totalRevenue').innerText = data.revenue.toFixed(2);
      document.getElementById('pendingBills').innerText = data.pending;

      const ctx = document.getElementById('overviewChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Patients', 'Doctors', 'Appointments', 'Revenue', 'Pending Bills'],
          datasets: [{
            label: 'Hospital Overview',
            data: [data.patients, data.doctors, data.appointments, data.revenue, data.pending],
            backgroundColor: ['#3498db', '#1abc9c', '#9b59b6', '#f1c40f', '#e74c3c']
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: { beginAtZero: true }
          }
        }
      });
    }

    loadReports();
</script>
</body>
</html>
